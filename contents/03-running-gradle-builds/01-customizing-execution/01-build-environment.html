<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>构建环境 | Gradle Build Tool</title>
    <meta name="description" content="Gradle Chinese document">
    <link rel="icon" href="/gradle-docs-cn/favicon.ico">
    
    <link rel="preload" href="/gradle-docs-cn/assets/css/0.styles.0907a01a.css" as="style"><link rel="preload" href="/gradle-docs-cn/assets/js/app.7989bdc5.js" as="script"><link rel="preload" href="/gradle-docs-cn/assets/js/2.73a3722c.js" as="script"><link rel="preload" href="/gradle-docs-cn/assets/js/15.5e4e4644.js" as="script"><link rel="preload" href="/gradle-docs-cn/assets/js/3.610d035e.js" as="script"><link rel="prefetch" href="/gradle-docs-cn/assets/js/10.810c392f.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/11.57e3fdf3.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/12.497546cb.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/13.ee6978e8.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/14.aa0e4c18.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/16.1edd3fe4.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/17.200ea9f3.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/18.07abdf5f.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/19.82357a94.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/20.028a3e6d.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/21.8bac0d8c.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/22.4e12dbc2.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/23.fb09b07e.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/4.ab5c0d3f.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/5.5b2da86c.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/6.3c42583e.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/7.52ca0f1f.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/8.3399c602.js"><link rel="prefetch" href="/gradle-docs-cn/assets/js/9.eb5ba954.js">
    <link rel="stylesheet" href="/gradle-docs-cn/assets/css/0.styles.0907a01a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/gradle-docs-cn/" class="home-link router-link-active"><!----> <span class="site-name">Gradle Build Tool</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/gradle-docs-cn/contents/01-docs-home/" class="nav-link">Docs Home</a></div><div class="nav-item"><a href="https://gradle.org/guides" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Tutorials
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://docs.gradle.org/current/release-notes.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Release Notes
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Gradle API</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gradle.org/guides" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Javadoc
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gradle.org/guides2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Groovy DSL Reference
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gradle.org/guides3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Groovy DSL Primer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gradle.org/guides4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Kotlin DSL API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gradle.org/guides5" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Kotlin DSL Primer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/gradle-docs-cn/contents/01-docs-home/" class="nav-link">Docs Home</a></div><div class="nav-item"><a href="https://gradle.org/guides" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Tutorials
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://docs.gradle.org/current/release-notes.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Release Notes
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Gradle API</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gradle.org/guides" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Javadoc
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gradle.org/guides2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Groovy DSL Reference
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gradle.org/guides3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Groovy DSL Primer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gradle.org/guides4" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Kotlin DSL API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gradle.org/guides5" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Kotlin DSL Primer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About Gradle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>User Manual</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Running Gradle Builds</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>自定义Execution</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/01-build-environment.html" class="active sidebar-link">配置构建环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/01-build-environment.html#gradle属性" class="sidebar-link">Gradle属性</a></li><li class="sidebar-sub-header"><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/01-build-environment.html#系统属性" class="sidebar-link">系统属性</a></li><li class="sidebar-sub-header"><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/01-build-environment.html#环境变量" class="sidebar-link">环境变量</a></li><li class="sidebar-sub-header"><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/01-build-environment.html#project属性" class="sidebar-link">Project属性</a></li><li class="sidebar-sub-header"><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/01-build-environment.html#配置jvm内存" class="sidebar-link">配置JVM内存</a></li><li class="sidebar-sub-header"><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/01-build-environment.html#使用project属性配置任务" class="sidebar-link">使用Project属性配置任务</a></li><li class="sidebar-sub-header"><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/01-build-environment.html#通过http代理访问web" class="sidebar-link">通过HTTP代理访问web</a></li></ul></li><li><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/02-the-gradle-daemon.html" class="sidebar-link">配置Gradle Daemon</a></li><li><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/03-initialization-scripts.html" class="sidebar-link">使用初始化脚本</a></li></ul></section></li><li><a href="/gradle-docs-cn/contents/03-running-gradle-builds/02-executing-multi-project-builds.html" class="sidebar-link">执行多项目构建</a></li><li><a href="https://guides.gradle.org/creating-build-scans/" target="_blank" rel="noopener noreferrer" class="sidebar-link">检查Gradle构建<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>优化构建时间</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/gradle-docs-cn/contents/03-running-gradle-builds/05-integrating-separate-gradle-builds.html" class="sidebar-link">集成单独的Gradle构建(复合构建)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Authoring Gradle Builds</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Extending Gradle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reference</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="page-title"><a href="#page-title" aria-hidden="true" class="header-anchor">#</a> 构建环境</h1> <blockquote><p><a href="https://docs.gradle.org/current/userguide/build_environment.html" target="_blank" rel="noopener noreferrer">原文链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#gradle属性">Gradle属性</a></li><li><a href="#系统属性">系统属性</a></li><li><a href="#环境变量">环境变量</a></li><li><a href="#project属性">Project属性</a></li><li><a href="#配置jvm内存">配置JVM内存</a></li><li><a href="#使用project属性配置任务">使用Project属性配置任务</a></li><li><a href="#通过http代理访问web">通过HTTP代理访问web</a><ul><li><a href="#ntlm身份验证">NTLM身份验证</a></li></ul></li></ul></div><p></p> <div class="tip custom-block"><p>有兴趣配置构建缓存以加快构建速度吗？在此处注册以参加我们的<a href="https://gradle.com/training/build-cache-deep-dive/?bid=docs-build-environment&amp;_ga=2.98322847.1480847771.1569235223-1279986108.1569235223" target="_blank" rel="noopener noreferrer">Build Cache<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>培训课程，以了解顶级工程团队用来提高构建速度的一些技巧。</p></div> <p>Gradle提供了多种机制来配置Gradle本身和特定项目的行为。以下是使用这些机制的参考。</p> <p>在配置Gradle行为时，您可以使用以下方法，以从高到低的优先级顺序列出（第一个优先级最高）：</p> <ul><li><p><a href="https://docs.gradle.org/current/userguide/command_line_interface.html#command_line_interface" target="_blank" rel="noopener noreferrer">Command-line flags<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，例如<code>--build-cache</code>。这些优先于属性和环境变量。</p></li> <li><p><a href="#%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7">System properties</a>，例如存储在<code>gradle.properties</code>文件中的<code>systemProp.http.proxyHost=somehost.org</code>。</p></li> <li><p><a href="#gradle%E5%B1%9E%E6%80%A7">Gradle properties</a>，例如<code>org.gradle.caching=true</code>，通常存储在项目根目录或<code>GRADLE_USER_HOME</code>环境变量的<code>gradle.properties</code>文件中。</p></li> <li><p><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">Environment variables</a>，例如执行Gradle的环境来源的<code>GRADLE_OPTS</code>。</p></li></ul> <p>除了配置构建环境之外，还可以使用<a href="#project%E5%B1%9E%E6%80%A7">Project properties</a>（例如<code>-PreleaseType=final</code>）配置给定的项目构建。</p> <h2 id="gradle属性"><a href="#gradle属性" aria-hidden="true" class="header-anchor">#</a> Gradle属性</h2> <p>Gradle提供了几个选项，可以轻松配置将用于执行构建的Java流程。虽然可以通过<code>GRADLE_OPTS</code>或<code>JAVA_OPTS</code>在本地环境中配置这些设置，但将某些设置（例如JVM内存配置和Java主目录位置(<strong>JAVA_HOME</strong>)）存储在版本控制中很有用，这样整个团队就可以在一致的环境中工作。</p> <p>为构建建立一致的环境就像将这些设置放入<code>gradle.properties</code>文件一样简单。该配置按以下顺序应用（如果在多个位置配置了同一个选项，则取最后一个）：</p> <ul><li><p>Gradle安装目录中的<code>gradle.properties</code>。</p></li> <li><p>工程根目录中的<code>gradle.properties</code>。</p></li> <li><p><code>GRADLE_USER_HOME</code>目录中的<code>gradle.properties</code>。</p></li> <li><p>系统属性，例如在命令行上设置<code>-Dgradle.user.home</code>时。</p></li></ul> <p>以下属性可用于配置Gradle构建环境：</p> <ul><li><p><strong><code>org.gradle.caching=(true,false)</code></strong></p> <p>设置为<code>true</code>时，Gradle将在可能的情况下重用任何先前构建的任务输出，从而使构建速度更快。了解有关<a href="https://docs.gradle.org/current/userguide/build_cache.html#build_cache" target="_blank" rel="noopener noreferrer">使用构建缓存<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的更多信息。</p></li> <li><p><strong><code>org.gradle.caching.debug=(true,false)</code></strong></p> <p>设置为<code>true</code>时，单个输入属性哈希值和每个任务的构建缓存键都记录在控制台上。了解有关<a href="https://docs.gradle.org/current/userguide/build_cache.html#sec:task_output_caching" target="_blank" rel="noopener noreferrer">任务输出缓存<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的更多信息。</p></li> <li><p><strong><code>org.gradle.configureondemand=(true,false)</code></strong></p> <p>启用<a href="https://docs.gradle.org/current/userguide/multi_project_builds.html#sec:configuration_on_demand" target="_blank" rel="noopener noreferrer">按需孵化配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，Gradle将尝试仅配置必要的项目。</p></li> <li><p><strong><code>org.gradle.console=(auto,plain,rich,verbose)</code></strong></p> <p>自定义控制台输出的颜色或详细程度。默认值取决于如何调用Gradle。有关其他详细信息，请参见<a href="https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_logging" target="_blank" rel="noopener noreferrer">命令行日志记录<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></li> <li><p><strong><code>org.gradle.daemon=(true,false)</code></strong></p> <p>设置为<code>true</code>时，将使用<a href="/contents/03-running-gradle-builds/01-customizing-execution/02-the-gradle-daemon">Gradle Daemon</a>运行构建。默认为<code>true</code>。</p></li> <li><p><strong><code>org.gradle.daemon.idletimeout=(# of idle millis)</code></strong></p> <p>在指定的空闲毫秒数后，<strong>Gradle Daemon</strong> 将自行终止。默认值为<code>10800000</code>(3小时)。</p></li> <li><p><strong><code>org.gradle.debug=(true,false)</code></strong></p> <p>设置为<code>true</code>时，Gradle将在启用远程调试的情况下运行构建，侦听端口<code>5005</code>。请注意，这等效于将<code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005</code>添加到JVM命令行，它将挂起虚拟机，直到连接了调试器。默认为<code>false</code>。</p></li> <li><p><strong><code>org.gradle.java.home=(path to JDK home)</code></strong></p> <p>指定用于Gradle构建过程的Java目录。可以将值设置为<code>jdk</code>或<code>jre</code>位置，但是，根据您的构建方式，使用JDK更安全。如果未指定设置，则从您的环境（<code>JAVA_HOME</code>或<code>java</code>的路径）派生合理的默认值。这不会影响用于启动Gradle客户端VM的Java版本（<a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">请参阅环境变量</a>）。</p></li> <li><p><strong><code>org.gradle.jvmargs=(JVM arguments)</code></strong></p> <p>指定用于 <strong>Gradle Daemon</strong> 的JVM参数。该设置对于<a href="#%E9%85%8D%E7%BD%AEjvm%E5%86%85%E5%AD%98">配置JVM内存设置</a>以提高构建性能特别有用。这不会影响Gradle客户端VM的JVM设置。</p></li> <li><p><strong><code>org.gradle.logging.level=(quiet,warn,lifecycle,info,debug)</code></strong></p> <p>当设置为<code>quiet</code>, <code>warn</code>, <code>lifecycle</code>, <code>info</code>, <code>debug</code>时，Gradle将使用此日志级别。这些值不区分大小写。<code>lifecycle</code>级别是<strong>默认级别</strong>。请参阅<a href="https://docs.gradle.org/current/userguide/logging.html#sec:choosing_a_log_level" target="_blank" rel="noopener noreferrer">选择日志级别<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></li> <li><p><strong><code>org.gradle.parallel=(true,false)</code></strong></p> <p>配置后，Gradle将派生到<code>org.gradle.workers.max</code>JVM，以并行执行项目。要了解有关并行任务执行的更多信息，请参阅<a href="https://guides.gradle.org/performance/#parallel_execution" target="_blank" rel="noopener noreferrer">Gradle性能指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></li> <li><p><strong><code>org.gradle.warning.mode=(all,none,summary)</code></strong></p> <p>当设置为<code>all</code>, <code>summary</code>或<code>none</code>时，Gradle将使用不同的警告类型显示。有关详细信息，请参见<a href="https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_logging" target="_blank" rel="noopener noreferrer">命令行日志记录选项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></li> <li><p><strong><code>org.gradle.workers.max=(max # of worker processes)</code></strong></p> <p>配置后，Gradle将使用最多给定数量的处理器。默认值为CPU处理器数。另请参见<a href="https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_performance" target="_blank" rel="noopener noreferrer">性能命令行选项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></li> <li><p><strong><code>org.gradle.priority=(low,normal)</code></strong></p> <p>指定 <strong>Gradle Daemon</strong> 及其启动的所有进程的调度优先级。默认为<code>normal</code>。另请参见<a href="https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_performance" target="_blank" rel="noopener noreferrer">性能命令行选项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></li></ul> <p>下面的示例演示各种属性的用法。</p> <p>示例1.使用<code>gradle.properties</code>文件设置属性</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># gradle.properties</span>

<span class="token attr-name">gradlePropertiesProp</span><span class="token punctuation">=</span><span class="token attr-value">gradlePropertiesValue</span>
<span class="token attr-name">sysProp</span><span class="token punctuation">=</span><span class="token attr-value">shouldBeOverWrittenBySysProp</span>
<span class="token attr-name">systemProp.system</span><span class="token punctuation">=</span><span class="token attr-value">systemValue</span>
</code></pre></div><div class="code-switcher"><div class="tab-header"><ul><li class="active"> Groovy
            </li><li> Kotlin
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">// build.gradle</span>

task printProps <span class="token punctuation">{</span>
    doLast <span class="token punctuation">{</span>
        println commandLineProjectProp
        println gradlePropertiesProp
        println systemProjectProp
        println System<span class="token operator">.</span>properties<span class="token punctuation">[</span><span class="token string">'system'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="tab-content" style="display:none;"><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// build.gradle.kts</span>

<span class="token comment">// Project properties can be accessed via delegation</span>
<span class="token keyword">val</span> commandLineProjectProp<span class="token operator">:</span> String <span class="token keyword">by</span> project
<span class="token keyword">val</span> gradlePropertiesProp<span class="token operator">:</span> String <span class="token keyword">by</span> project
<span class="token keyword">val</span> systemProjectProp<span class="token operator">:</span> String <span class="token keyword">by</span> project

tasks<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;printProps&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    doLast <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>commandLineProjectProp<span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span>gradlePropertiesProp<span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span>systemProjectProp<span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;system&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div> <div class="language-sh extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-sh"><code>$ gradle -q -PcommandLineProjectProp<span class="token operator">=</span>commandLineProjectPropValue -Dorg.gradle.project.systemProjectProp<span class="token operator">=</span>systemPropertyValue printProps
commandLineProjectPropValue
gradlePropertiesValue
systemPropertyValue
systemValue
</code></pre></div><h2 id="系统属性"><a href="#系统属性" aria-hidden="true" class="header-anchor">#</a> 系统属性</h2> <p>使用<code>-D</code>命令行选项，可以将系统属性传递给运行Gradle的JVM。 gradle命令的<code>-D</code>选项与<code>java</code>命令的<code>-D</code>选项具有相同的效果。</p> <p>您还可以在<code>gradle.properties</code>文件中使用前缀<code>systemProp</code>设置系统属性。</p> <p><strong>在<code>gradle.properties</code>中指定系统属性</strong></p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">systemProp.gradle.wrapperUser</span><span class="token punctuation">=</span><span class="token attr-value">myuser</span>
<span class="token attr-name">systemProp.gradle.wrapperPassword</span><span class="token punctuation">=</span><span class="token attr-value">mypassword</span>
</code></pre></div><p>以下系统属性可用。请注意，<strong>命令行选项优先于系统属性</strong>。</p> <ul><li><p><strong><code>gradle.wrapperUser=(myuser)</code></strong></p> <p>指定用户名以使用HTTP基本认证从服务器下载Gradle发行版。在<a href="https://docs.gradle.org/current/userguide/gradle_wrapper.html#sec:authenticated_download" target="_blank" rel="noopener noreferrer">Authenticated wrapper下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中了解更多信息。</p></li> <li><p><strong><code>gradle.wrapperPassword=(mypassword)</code></strong></p> <p>指定使用Gradle包装器下载Gradle发行版的密码。</p></li> <li><p><strong><code>gradle.user.home=(path to directory)</code></strong></p> <p>指定Gradle用户的主目录。</p></li></ul> <p>在多项目构建中，将忽略除根目录以外的任何项目中设置的“<code>systemProp.</code>”属性。也就是说，将仅检查根项目的<code>gradle.properties</code>文件中以“<code>systemProp.</code>”前缀开头的属性。</p> <h2 id="环境变量"><a href="#环境变量" aria-hidden="true" class="header-anchor">#</a> 环境变量</h2> <p>以下环境变量可用于<code>gradle</code>命令。请注意，<strong>命令行选项和系统属性优先于环境变量</strong>。</p> <ul><li><p><strong><code>GRADLE_OPTS</code></strong></p> <p>指定启动Gradle客户端VM时要使用的JVM参数。客户端VM仅处理命令行输入/输出，因此很少需要更改其VM选项。实际的构建由 <strong>Gradle Daemon</strong> 运行，不受此环境变量的影响。</p></li> <li><p><strong><code>GRADLE_USER_HOME</code></strong></p> <p>指定Gradle用户的主目录（如果未设置，则默认为<code>$USER_HOME/.gradle</code>）。</p></li> <li><p><strong><code>JAVA_HOME</code></strong></p> <p>指定要用于客户端VM的JDK安装目录。除非在<code>org.gradle.java.home</code>的Gradle属性文件中指定了另一个虚拟机，否则此VM也用于守护进程。</p></li></ul> <h2 id="project属性"><a href="#project属性" aria-hidden="true" class="header-anchor">#</a> Project属性</h2> <p>您可以通过<code>-P</code>命令行选项将属性直接添加到<a href="https://docs.gradle.org/current/dsl/org.gradle.api.Project.html" target="_blank" rel="noopener noreferrer">Project<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>对象。</p> <p>当Gradle看到特别命名的系统属性或环境变量时，它也可以设置项目属性。如果环境变量名称看起来像<code>ORG_GRADLE_PROJECT_prop=somevalue</code>，则Gradle将在项目对象上设置<code>prop</code>属性，其值为<code>somevalue</code>。 Gradle也为系统属性支持此功能，但是具有不同的命名模式，类似于<code>org.gradle.project.prop</code>。以下两个都将Project对象上的<code>foo</code>属性设置为“<code>bar</code>”。</p> <p><strong>通过系统属性设置Project属性</strong></p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">org.gradle.project.foo</span><span class="token punctuation">=</span><span class="token attr-value">bar</span>
</code></pre></div><p><strong>通过环境变量设置Project属性</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ORG_GRADLE_PROJECT_foo=bar
</code></pre></div><div class="tip custom-block"><p><strong>用户主目录中的属性文件优先于Project目录中的属性文件。</strong></p></div> <p>如果您没有持续集成服务器的管理员权限，并且需要设置不容易看到的属性值，则此功能非常有用。由于您不能在那种情况下使用<code>-P</code>选项，也不能更改系统级配置文件，因此正确的策略是更改持续集成构建作业的配置，并添加与预期模式匹配的环境变量设置。这对于系统上的普通用户是不可见的。</p> <p>您可以像使用变量一样使用名称来访问构建脚本中的Project属性。</p> <div class="tip custom-block"><p>如果引用了Project属性但该属性不存在，则将引发异常，并且构建将失败。</p> <p>在使用<a href="https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:hasProperty(java.lang.String)" target="_blank" rel="noopener noreferrer">Project.hasProperty(java.lang.String)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>方法访问可选Project属性之前，应检查其是否存在。</p></div> <h2 id="配置jvm内存"><a href="#配置jvm内存" aria-hidden="true" class="header-anchor">#</a> 配置JVM内存</h2> <p>您可以通过以下方式调整Gradle的JVM选项：</p> <p><code>org.gradle.jvmargs</code>Gradle属性控制运行构建的VM。默认为<code>-Xmx512m &quot;-XX:MaxMetaspaceSize=256m&quot;</code></p> <p><strong>更改构建VM的JVM设置</strong></p> <div class="language- extra-class"><pre class="language-text"><code>org.gradle.jvmargs=-Xmx2g -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8
</code></pre></div><p><code>JAVA_OPTS</code>环境变量控制命令行客户端，该命令行客户端仅用于显示控制台输出。默认为<code>-Xmx64m</code>。</p> <p><strong>更改客户端VM的JVM设置</strong></p> <div class="language- extra-class"><pre class="language-text"><code>JAVA_OPTS=&quot;-Xmx64m -XX:MaxPermSize=64m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8&quot;
</code></pre></div><div class="tip custom-block"><p>在一种情况下，客户端VM也可以用作构建VM：如果停用<a href="https://docs.gradle.org/current/userguide/gradle_daemon.html#gradle_daemon" target="_blank" rel="noopener noreferrer">Gradle Daemon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，并且客户端VM具有与构建VM所需的相同设置，则客户端VM将直接运行构建。否则，客户端虚拟机将派生一个新的虚拟机来运行实际的构建，以便采用不同的设置。</p></div> <p>某些任务（例如<code>test</code>任务）也会派生其他JVM进程。您可以通过任务本身来配置它们。它们默认都使用<code>-Xmx512m</code>。</p> <p>示例2.为<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.compile.JavaCompile.html" target="_blank" rel="noopener noreferrer">JavaCompile<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>任务设置Java编译选项</p> <div class="code-switcher"><div class="tab-header"><ul><li class="active"> Groovy
            </li><li> Kotlin
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">// build.gradle</span>

plugins <span class="token punctuation">{</span>
    id <span class="token string">'java'</span>
<span class="token punctuation">}</span>

tasks<span class="token operator">.</span><span class="token function">withType</span><span class="token punctuation">(</span>JavaCompile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    options<span class="token operator">.</span>compilerArgs <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token string">'-Xdoclint:none'</span><span class="token punctuation">,</span> <span class="token string">'-Xlint:none'</span><span class="token punctuation">,</span> <span class="token string">'-nowarn'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="tab-content" style="display:none;"><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// build.gradle.kts</span>

plugins <span class="token punctuation">{</span>
    java
<span class="token punctuation">}</span>

tasks<span class="token punctuation">.</span>withType<span class="token operator">&lt;</span>JavaCompile<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">configureEach</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>compilerArgs <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">&quot;-Xdoclint:none&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-Xlint:none&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-nowarn&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div> <p>请参阅<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.testing.Test.html" target="_blank" rel="noopener noreferrer">Test<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> API文档中的其他示例，以及<a href="https://docs.gradle.org/current/userguide/java_testing.html#sec:test_execution" target="_blank" rel="noopener noreferrer">Java插件参考中的测试执行<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>使用<code>--scan</code>选项时，<a href="https://scans.gradle.com/?_ga=2.61875884.1480847771.1569235223-1279986108.1569235223" target="_blank" rel="noopener noreferrer">Build scans<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>将告诉您有关执行构建的JVM的信息。</p> <p><img src="https://docs.gradle.org/current/userguide/img/build-scan-infrastructure.png" alt=""></p> <h2 id="使用project属性配置任务"><a href="#使用project属性配置任务" aria-hidden="true" class="header-anchor">#</a> 使用Project属性配置任务</h2> <p>可以根据调用时指定的项目属性来更改任务的行为。</p> <p>假设您想确保发布版本仅由CI触发。一种简单的方法是通过<code>isCI</code>项目属性。</p> <p>例子3.防止CI外部发布</p> <div class="code-switcher"><div class="tab-header"><ul><li class="active"> Groovy
            </li><li> Kotlin
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">// build.gradle</span>

task performRelease <span class="token punctuation">{</span>
    doLast <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>project<span class="token operator">.</span><span class="token function">hasProperty</span><span class="token punctuation">(</span><span class="token string gstring">&quot;isCI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string gstring">&quot;Performing release actions&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidUserDataException</span><span class="token punctuation">(</span><span class="token string gstring">&quot;Cannot perform release outside of CI&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="tab-content" style="display:none;"><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// build.gradle.kts</span>

tasks<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;performRelease&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    doLast <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>project<span class="token punctuation">.</span><span class="token function">hasProperty</span><span class="token punctuation">(</span><span class="token string">&quot;isCI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Performing release actions&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token function">InvalidUserDataException</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot perform release outside of CI&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div> <div class="language-sh extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br></div><pre class="language-sh"><code>$ gradle performRelease -PisCI<span class="token operator">=</span>true --quiet
Performing release actions
</code></pre></div><h2 id="通过http代理访问web"><a href="#通过http代理访问web" aria-hidden="true" class="header-anchor">#</a> 通过HTTP代理访问web</h2> <p>通过标准JVM系统属性来配置HTTP或HTTPS代理（例如，用于下载依赖项）。这些属性可以直接在构建脚本中设置。例如，设置HTTP代理主机将通过<code>System.setProperty('http.proxyHost', 'www.somehost.org')</code>完成。另外，可以<a href="#gradle%E5%B1%9E%E6%80%A7">在gradle.properties中指定属性</a>。</p> <p><strong>使用<code>gradle.properties</code>配置HTTP代理</strong></p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">systemProp.http.proxyHost</span><span class="token punctuation">=</span><span class="token attr-value">www.somehost.org</span>
<span class="token attr-name">systemProp.http.proxyPort</span><span class="token punctuation">=</span><span class="token attr-value">8080</span>
<span class="token attr-name">systemProp.http.proxyUser</span><span class="token punctuation">=</span><span class="token attr-value">userid</span>
<span class="token attr-name">systemProp.http.proxyPassword</span><span class="token punctuation">=</span><span class="token attr-value">password</span>
<span class="token attr-name">systemProp.http.nonProxyHosts</span><span class="token punctuation">=</span><span class="token attr-value">*.nonproxyrepos.com|localhost</span>
</code></pre></div><p>HTTPS有单独的设置。</p> <p><strong>使用<code>gradle.properties</code>配置HTTPS代理</strong></p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">systemProp.https.proxyHost</span><span class="token punctuation">=</span><span class="token attr-value">www.somehost.org</span>
<span class="token attr-name">systemProp.https.proxyPort</span><span class="token punctuation">=</span><span class="token attr-value">8080</span>
<span class="token attr-name">systemProp.https.proxyUser</span><span class="token punctuation">=</span><span class="token attr-value">userid</span>
<span class="token attr-name">systemProp.https.proxyPassword</span><span class="token punctuation">=</span><span class="token attr-value">password</span>
<span class="token attr-name">systemProp.https.nonProxyHosts</span><span class="token punctuation">=</span><span class="token attr-value">*.nonproxyrepos.com|localhost</span>
</code></pre></div><p>您可能需要设置其他属性才能访问其他网络。这里有2个参考可能会有所帮助：</p> <ul><li><p><a href="https://git-wip-us.apache.org/repos/asf?p=ant.git;a=blob;f=src/main/org/apache/tools/ant/util/ProxySetup.java;hb=HEAD" target="_blank" rel="noopener noreferrer">ProxySetup.java in the Ant codebase<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="http://download.oracle.com/javase/7/docs/technotes/guides/net/properties.html" target="_blank" rel="noopener noreferrer">JDK 7 Networking Properties<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h3 id="ntlm身份验证"><a href="#ntlm身份验证" aria-hidden="true" class="header-anchor">#</a> NTLM身份验证</h3> <p>如果您的代理服务器需要NTLM身份验证，则可能需要提供身份验证域以及用户名和密码。您可以通过两种方式提供用于向NTLM代理进行身份验证的域：</p> <ul><li><p>将<code>http.proxyUser</code>系统属性设置为<code>domain/username</code>之类的值。</p></li> <li><p>通过<code>http.auth.ntlm.domain</code>系统属性提供身份验证域。</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/gradle-docs-cn/contents/02-user-manual/05-troubleshooting-builds.html" class="prev">故障排除</a></span> <span class="next"><a href="/gradle-docs-cn/contents/03-running-gradle-builds/01-customizing-execution/02-the-gradle-daemon.html">配置Gradle Daemon</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/gradle-docs-cn/assets/js/app.7989bdc5.js" defer></script><script src="/gradle-docs-cn/assets/js/2.73a3722c.js" defer></script><script src="/gradle-docs-cn/assets/js/15.5e4e4644.js" defer></script><script src="/gradle-docs-cn/assets/js/3.610d035e.js" defer></script>
  </body>
</html>
